<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React WebAR</title>

    <!-- Load A-Frame and AR.js -->
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ar.js@1.7.2/aframe/build/aframe-ar.min.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">

    <!-- React Root -->
    <div id="root"></div>

    <!-- A-Frame AR Scene -->
    <a-scene 
      embedded 
      arjs="sourceType: webcam; debugUIEnabled: false;"
      vr-mode-ui="enabled: false"
      renderer="antialias: true; colorManagement: true; highRefreshRate: true;"
    >

        <!-- Set 2: Furniture with Interactive Buttons -->
        <a-entity id="set2" position="0 0.5 -2" visible="true">
            <!-- Sofa -->
            <a-gltf-model 
                src="assets/outdoor_couch.glb"
                position="0 0 -2.5"
                scale="0.2 0.2 0.2"
                rotation="0 270 0">
            </a-gltf-model>
            <a-entity
                id="outdoor_couch-button"
                position="-0.2 0.3 -2.5"
                material="color: #f8f8f8; shader: flat; side: double; opacity: 2;"
                onclick="showPopup('outdoor_couch')"
                text="value: ?; align: center; color: black; baseline: center;">
            </a-entity>

        </a-entity>

        <!-- Set 1: Furniture with Interactive Buttons -->
        <a-entity id="set1" position="0 0.5 -2" visible="false">
            <!-- Scan Sofa -->
            <a-gltf-model
                src="assets/scan_sofa.glb"
                position="0 0 -2.5"
                scale="0.7 0.7 0.7"
                rotation="0 0 0">
            </a-gltf-model>
            <a-entity
                id="scan_sofa-button"
                position="0 0.4 -2.5"
                material="color: #f8f8f8; shader: flat;"
                onclick="showPopup('scan_sofa')"
                text="value: ?; align: center; color: black; baseline: center;">
            </a-entity>

            <!-- Low Table -->
            <a-gltf-model
                src="assets/scan_low_table.glb"
                position="0 0 -1.3"
                scale="0.5 0.5 0.5"
                rotation="0 0 0">
            </a-gltf-model>
            <a-entity
                id="scan_low_table-button"
                position="0 0 -1.3"
                material="color: #f8f8f8; shader: flat;"
                onclick="showPopup('scan_low_table')"
                text="value: ?; align: center; color: black; baseline: center;">
            </a-entity>

            <!-- Carpet -->
            <a-gltf-model
                src="assets/scan_carpet.glb"
                position="0 -0.5 -2"
                scale="1.2 0.65 0.65"
                rotation="0 0 0">
            </a-gltf-model>
            <a-entity
                id="scan_carpet-button"
                position="0 -1 -2"
                material="color: #f8f8f8; shader: flat;"
                onclick="showPopup('scan_carpet')"
                text="value: ?; align: center; color: black; baseline: center;">
            </a-entity>

            <!-- Couch -->
            <a-gltf-model
                src="assets/scan_couch.glb"
                position="-1 0 -1.8"
                scale="0.35 0.35 0.35"
                rotation="0 45 0">
            </a-gltf-model>
            <a-entity
                id="scan_couch-button"
                position="-1 0.3 -1.8"
                material="color: #f8f8f8; shader: flat;"
                onclick="showPopup('scan_couch')"
                text="value: ?; align: center; color: black; baseline: center;">
            </a-entity>

            <!-- Floor Lamp -->
            <a-gltf-model
                src="assets/floor_lamp.glb"
                position="-0.75 0 -2"
                scale="0.05 0.05 0.05"
                rotation="0 270 0">
            </a-gltf-model>
            <a-entity
                id="floor-lamp-button"
                position="-0.75 0.5 -2"
                material="color: #f8f8f8; shader: flat;"
                onclick="showPopup('floor_lamp')"
                text="value: ?; align: center; color: black; baseline: center;">
            </a-entity>
        </a-entity>

        <!-- Add Lights -->
        <a-light type="directional" intensity="1" position="2 4 2" castShadow="true"></a-light>
        <a-light type="ambient" intensity="0.5"></a-light>

        <a-camera></a-camera>
    </a-scene>

    <!-- Popup Script -->
    <script>
          // Global radius size variable
          const radiusSize = 0.05;

          // Update radius dynamically for all buttons
          document.addEventListener("DOMContentLoaded", () => {
            const buttons = [
              document.getElementById("outdoor_couch-button"),
              document.getElementById("floor_lamp-button"),
              document.getElementById("scan_sofa-button"),
              document.getElementById("scan_carpet-button"),
              document.getElementById("scan_couch-button"),
              document.getElementById("scan_low_table-button")                                        
            ];

            buttons.forEach(button => {
              button.setAttribute("geometry", `primitive: circle; radius: ${radiusSize}`);
            });
          });

      function showPopup(modelId) {
        alert(`More info about: ${modelId}`);
      }
    </script>

</body>
</html>